\section{Meilenstein 1 $-$ Datenzugriffsschicht}

% Teilaufgabe 1 {{{
\subsection{Teilaufgabe 1: Ausschnitt aus Logischem DM mit Entities und Value Objects}

\subsubsection{Klassendiagramm}
\input{ms1/klassendiagramm}

\subsubsection{Fachliches Glossar}
\input{ms1/fachliches_glossar}

\subsubsection{Erweiterungen der Aufgabenstellung}

Da es in unserem Logischen Datenmodell keine 1:1-Beziehung gab,
haben wir eine zus\"atzliche redundante Entit\"at eingebaut.

Hierbei handelt es sich um die Entit\"at Speise. Diese Entit\"at
h\"atte genauso gut einfach Teil der Zubereitungsanleitung sein
k\"onnen und ist nur in unser Modell aufgenommen worden, damit
wir die f\"ur die Aufgabenstellung ben\"otigte 1:1-Beziehung in
unserem Diagramm haben.

\subsubsection{Erl\"auterungen}

Wir haben Zubereitungsanleitung als Value Object und nicht als
Entity deklariert, da hier unserer Meinung nach Sharing nicht
sinnvoll ist und ein Zubereitungsanleitungsobjekt deshalb
persistent als Teil der zugeordneten Speise in der Datenbank
gespeichert werden sollte.

Gleiches gilt f\"ur die Zutatenmenge.

% }}}

\newpage

% Teilaufgabe 2 {{{
\subsection{Teilaufgabe 2: Entities und Value Objects mit JPA-Annotierung}

\subsubsection{Annotationen der Entities und Value Objects}
\input{ms1/code}

% H2-Console {{{
\subsubsection{H2-Console}

% Gerichtstabelle {{{
\begin{figure}[H]
\centering
\includegraphics{ms1/screenshots/gericht_table.PNG}
\caption{Gerichtstabelle}
\end{figure}
% }}}

% Speisentabelle {{{
\begin{figure}[H]
\centering
\includegraphics{ms1/screenshots/speise_tbl.PNG}
\caption{Speisentabelle}
\end{figure}
% }}}

% Zutatentabelle {{{
\begin{figure}[H]
\centering
\includegraphics{ms1/screenshots/zutat_tbl.PNG}
\caption{Zutatentabelle}
\end{figure}
% }}}

% Zutatenmengentabelle {{{
\begin{figure}[H]
\centering
\includegraphics{ms1/screenshots/zutatenmenge_tbl.PNG}
\caption{Zutatenmengentabelle}
\end{figure}
% }}}

% Zuordnungstabelle Gericht - Speise {{{
\begin{figure}[H]
\centering
\includegraphics{ms1/screenshots/gericht_speise_tbl.PNG}
\caption{Zuordnungstabelle Gericht - Speise}
\end{figure}
% }}}
% }}}
% }}}

% Teilaufgabe 3 {{{
\subsection{Teilaufgabe 3: Factories und Repositories}

% Gericht Factory {{{
\begin{mdframed}[style=codebox]
\textbf{Factory für Erstellung von Gerichten}
\lstinputlisting[language=Java, firstline=11, lastline=34]
{../code/ms1JPASpringDemo/src/main/java/ms1jpaspringdemo/factories/GerichtFactory.java}
\end{mdframed}
% }}}

Hier sieht man gut, warum Factories notwendig sind.
Bei der Erstellung von Gerichten muss zugleich die R\"uckreferenz von
Speise auf Gericht gesetzt werden.

% Speise Repository {{{
\begin{mdframed}[style=codebox]
\textbf{Factory für Erstellung von Gerichten}
\lstinputlisting[language=Java, firstline=12, lastline=17]
{../code/ms1JPASpringDemo/src/main/java/ms1jpaspringdemo/repositories/SpeiseRepository.java}
\end{mdframed}
%}}}

% Aufruf Query {{{
\begin{mdframed}[style=codebox]
\textbf{Ausgabe in der Konsole}
\lstinputlisting[language=Java, firstline=103, lastline=105]
{../code/ms1JPASpringDemo/src/main/java/ms1jpaspringdemo/SampleData.java}
\end{mdframed}
%}}}

Folgendes wird dann in der Konsole ausgegeben:

% Ausgabe Konsole{{{
\begin{figure}[H]
\centering
\includegraphics{ms1/screenshots/console.PNG}
\caption{Ausgabe in der Konsole}
\end{figure}
% }}}

%}}}



